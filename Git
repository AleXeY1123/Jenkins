#!groovy
pipeline {
    agent any

    stages {
        stage('==========Checkout1==========') {
            steps {
                checkout([$class: 'GitSCM', branches: [[name: '*/main']], doGenerateSubmoduleConfigurations: false, extensions: [], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'root_gitlab', url: 'http://10.0.2.5:80/root/test123.git']]])
                sh "ls -lart ./*"
            }
        }
        stage('==========123==========') {
            steps {
                git branch: 'main', changelog: false, credentialsId: 'root_gitlab', poll: false, url: 'http://10.0.2.5:80/root/test123.git'
            }
        }
        stage('==========Git clone==========') {
            steps {
                dir ('test_git_clone/1'){
               // withCredentials(usernamePassword(credentialsId :root_gitlab ,passwordVariable: 'GIT_PASSWORD', usernameVariable: 'GIT_USERNAME' )){
                 //   sh 'git config --global credential.username {GIT_USERNAME}'
                 //   sh 'git config --global credential.helper "!echo password={GIT_PASSWORD}; echo"'
                    sh 'git clone http://10.0.2.5:80/root/test123.git .'
                }
               //  }
            }
        }
    }
}
