#!groovy
pipeline {
    agent any

    stages {
        stage('==========Checkout1==========') {
            steps {

                    checkout(
                    [
                        $class: 'GitSCM', 
                        branches: [[name: '*/main']], 
                        doGenerateSubmoduleConfigurations: false, 
                        extensions: [], 
                        submoduleCfg: [], 
                        //userRemoteConfigs: [[credentialsId: 'root_gitlab', url: 'http://10.0.2.5:80/root/test123.git']]])
                        locations: 	[
                                        [
                                            cancelProcessOnExternalsFail: true, 
                                            credentialsId: 'root_gitlab', 
                                            depthOption: 'infinity', 
                                            ignoreExternalsOption: true, 
                                            local: 'Checkout1', 
                                            remote: 'http://10.0.2.5:80/root/test123.git'
                                        ]
                                    ], 
                                    quietOperation: false, 
                                    workspaceUpdater: 	[
                                                        $class: 'CheckoutUpdater'
                                                        ]
                    ])
                    sh "ls -lart ./*"

                
            }
        }
        stage('==========Checkout2==========') {
            steps {

                    checkout(
                    [
                        $class: 'GitSCM', 
                        branches: [[name: '*/main']], 
                        doGenerateSubmoduleConfigurations: false, 
                        extensions: [], 
                        submoduleCfg: [], 
                        //userRemoteConfigs: [[credentialsId: 'root_gitlab', url: 'http://10.0.2.5:80/root/test123.git']]])
                        locations: 	[
                                        [
                                            cancelProcessOnExternalsFail: true, 
                                            //credentialsId: 'root_gitlab', 
                                            depthOption: 'infinity', 
                                            ignoreExternalsOption: true, 
                                            local: 'Checkout2', 
                                            remote: 'https://github.com/AleXeY1123/PythonLessons.git'
                                        ]
                                    ], 
                                    quietOperation: false, 
                                    workspaceUpdater: 	[
                                                        $class: 'CheckoutUpdater'
                                                        ]
                    ])
                    sh "ls -lart ./*"

            }
        }
        /*stage('==========Checkout2==========') {
          steps {
            script {
               // The below will clone your repo and will be checked out to master branch by default.
               git credentialsId: 'jenkins-user-github', url: 'https://github.com/aakashsehgal/FMU.git'
               // Do a ls -lart to view all the files are cloned. It will be clonned. This is just for you to be sure about it.
               sh "ls -lart ./*" 
               // List all branches in your repo. 
               sh "git branch -a"
               // Checkout to a specific branch in your repo.
               sh "git checkout branchname"
              }
           }
        }
        stage('==========Clone repo==========') {
            steps {
                git branch: 'main', changelog: false, credentialsId: 'root_gitlab', poll: false, url: 'http://10.0.2.5:80/root/test123.git'
            }
        }
        stage('==========Git clone==========') {
            steps {
                dir ('test_git_clone/2'){
                    withCredentials([usernamePassword(credentialsId: 'root_gitlab' ,passwordVariable: 'GIT_PASSWORD', usernameVariable: 'GIT_USERNAME')]){
                        sh 'git config --global credential.username ${GIT_USERNAME}'
                        sh 'git config --global credential.helper "!echo password=${GIT_PASSWORD}; echo"'
                        sh 'git clone http://10.0.2.5:80/root/test123.git .'
                    }
                }
            }
        }*/
    }
}
