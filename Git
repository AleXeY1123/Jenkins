#!groovy
pipeline {
    agent any

    stages {
        stage('==========Checkout1==========') {
            steps {
                checkout([$class: 'GitSCM', branches: [[name: '*/main']], doGenerateSubmoduleConfigurations: false, extensions: [], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'root_gitlab', url: 'http://10.0.2.5:80/root/test123.git']]])
                sh "ls -lart ./*"
              }
            }

        stage('==========Git connect==========') {
            steps {
                withCredentials(usernamePassword(credentialsId :root_gitlab ,passwordVariable: 'GIT_PASSWORD', usernameVariable: 'GIT_USERNAME' )){
              sh 'git config --global credential.username {GIT_USERNAME}'
              sh 'git config --global credential.helper "!echo password={GIT_PASSWORD}; echo"'
              sh 'git clone "http://127.0.0.1:9999/root/test123.git"'
              }
            }
        }
    }
}
